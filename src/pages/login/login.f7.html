<template>
	<div class="page" data-name="login-screen" id="login-screen">
		<div class="sqr_bck" id="sqr1"></div>
		<div class="sqr_bck" id="sqr2"></div>
		<div class="sqr_bck" id="sqr3"></div>
		<div class="sqr_bck" id="sqr4"></div>
		<div class="page-content" id="login-screen">
			
			<div class="logo-cont">
				<img src="../../static/img/LOGO.png" alt="" class="logo" id="title" />
			</div>
			<div class="inputs list">
				<ul>
					<li class="item-content item-input">
						<div class="item-inner">
							<div class="item-input-wrap">
								<input type="email" id="email" placeholder="e-mail" required validate />
								<i class="icons material-icons">edit</i>
								<!-- <span class="input-clear-button"></span> -->
							</div>
						</div>
					</li>
					<li class="item-content item-input">
						<div class="item-inner">
							<div class="item-input-wrap">
								<input type="password" id="password" placeholder="Password" required validate />
								<i class="icons material-icons">edit</i>
								<!-- <span class="input-clear-button"></span> -->
							</div>
						</div>
					</li>
				</ul>
			</div>
			<div class="btns-cont center face">
				<a class="button round color-white face">Login with Facebook</a>
			</div>
			<div class="btns-cont two">
				<a class="button round color-white small" href="/signup/step1/">Sing up</a>
				<!-- <a class="button round color-white small" href="/payment-confirm-membership/">Sing up</a> -->
				<a id="login-btn" class="button round color-blue small">Login</a>
			</div>
			<div class="btns-cont center pass">
				<a class="button link color-blue" href="/recovery/">Forgot password?</a>
			</div>
		</div>
	</div>
</template>
<script>
	import $$ from "dom7";
	export default {
		on: {
			pageInit: function (e, page) {
				var self = this;
				// console.log(this);
				var emailInputValue = '';
				var passwordInputValue = '';

				// $$('#email').val('will@wetheforce.com');
				// $$('#password').val('123456789');
				// emailInputValue=$$('#email').val();

				console.log(emailInputValue);
				// password_login=$$
				var app = self.$app;

				$$('#login-btn').on('click', function (e) {
					e.preventDefault();
					emailInputValue=$$('#email').val();
					passwordInputValue=$$('#password').val();
					
					app.preloader.show('blue');
					app.request.promise.postJSON(app.data.server+'/auth/local', {
						"identifier": emailInputValue,
						"password": passwordInputValue
					})
					.then(function (res) {
						app.preloader.hide();
						app.views.main.router.navigate({name: 'about'});
					})
					.catch(function (err) {
						console.log(err);
					});
				});
			},
		},
	};
</script>
